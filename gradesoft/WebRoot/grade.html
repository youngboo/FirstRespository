<!DOCTYPE html>
<html>
<head>
<title>主页</title>

<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
<meta http-equiv="description" content="this is my page">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<script type="text/javascript">
	function submitForm1(thisObj) {
		var isSub = window.confirm("确认评分：" + thisObj.value + "？你只有一次打分机会");
		if (isSub) {
			formObject = document.getElementById("form1");
			formObject.submit();
		}
	}
	function isImg() {
		var fileObj = document.getElementById("imgFile");
		var fileNamedd = fileObj.value;
		var formObj = document.getElementById("form2");
		fileNamedd = fileNamedd.substr(fileNamedd.lastIndexOf("\.") + 1,
				fileNamedd.length);
		if ("jpg" == fileNamedd.toLowerCase()|| "gif" == fileNamedd.toLowerCase()||"jpeg" == fileNamedd.toLowerCase()) {
			formObj.submit();
		}else{
			alert("请上传指定文件类型，jpg/jpeg或gif");
		}
	}
	function subForm(){
		var formObj = document.getElementById("form2");
			formObj.submit();
	}
		function loadXMLDoc() {
		var xmlhttp;
		var txt, x, i;
		if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
			xmlhttp = new XMLHttpRequest();
		} else {// code for IE6, IE5
			xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
		}
		xmlhttp.onreadystatechange = function() {
			if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
				/* alert(xmlhttp.responseText); */
				/* alert(xmlhttp.responseXML); */
				xmlDoc = xmlhttp.responseXML;
				/* xmlDoc=xmlhttp.responseText; */
				txt = "";
				x = xmlDoc.getElementsByTagName("grade");
				for (i = 0; i < x.length; i++) {
				var nodeee = x[i].childNodes[0].nodeValue;
				var nodespl = nodeee.split(":");
				alert(nodespl[0]+";;;"+nodespl[1]);
					txt = txt + x[i].childNodes[0].nodeValue + "<br />";
				}
				document.getElementById("myDiv").innerHTML = txt;
			}
		}
		xmlhttp.open("GET",
				"http://localhost:8080/gradesoft/servlet/ReturnAjaxInfo?ajaxType=showResult&time="
						+ new Date().getTime(), true);
		xmlhttp.send();
	}
	setInterval("loadXMLDoc()","2000");
</script>
</head>

<body>
<div id="myDiv"></div>


	<table align="center" style="border:1px green solid;width:400px">
		<tr align="center">
			<td>请打分：
				<form action="servlet/MainServlet" method="post" id="form1">
					<label for="great">优</label><input type="radio" name="grade"
						value="优" id="great" onclick="submitForm1(this)" />
		 <label for="good">良</label><input type="radio" name="grade" value="良"
						id="good" onclick="submitForm1(this)" />
				</form></td>
		</tr>
		<tr>
			<td>
				<form action="servlet/UploadServlet" method="post"
					enctype="multipart/form-data" id="form2"> 请上传你珍藏的图片：<input
				type="file" onchange="subForm()" id="imgFile" name="imgFile"><!--  <label
				for="imgFile">目前支持jpg和gif类型的图片</label> --></form></td>
		</tr>
		<tr align="center">
			<td><a href="/gradesoft/servlet/ShowResultServlet">跳转到结果页面</a></td>
		</tr>
	</table>

</body>
</html>